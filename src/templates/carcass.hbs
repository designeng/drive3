<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

    <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel="icon" href="/assets/images/icon.png">

    <title>DRIVE | {{channel.name}}</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/fonts.css">

    <link rel="stylesheet" href="/assets/css/magnific-popup.css">
    <link rel="stylesheet" href="/assets/css/likely.css">
    <link rel="stylesheet" href="/assets/css/custom.css">
    <link rel="stylesheet" href="/assets/css/header.css">
    <link rel="stylesheet" href="/assets/css/channels-menu.css">
    <link rel="stylesheet" href="/assets/css/voting.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <script src="http://dimsemenov-static.s3.amazonaws.com/dist/jquery.magnific-popup.min.js" type="text/javascript"></script>
    <script src="//twemoji.maxcdn.com/twemoji.min.js" type="text/javascript"></script>
    <script>
    // TODO: extract to script file
    var createMagnificPopup = function(selector) {
        $(selector).magnificPopup({
            type:'image',
            midClick: true,
            closeOnContentClick: true,
            showCloseBtn: false,
            zoom: {
                enabled: true,
                duration: 400,
                easing: 'ease-in-out',
                // TODO: find how to fix it. 
                // Fisrt time element is clicked it's starting not from openerElement shape.
                opener: function(openerElement) {
                    return openerElement;
                }
            }
        });
    }

    var twemojiParse = function() {
        var args = (arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments));
        for (var i = args.length - 1; i >= 0; i--) {
            var id = args[i];
            twemoji.parse(document.getElementById(id));
        };
    }

    // TODO: it's only a row prototype.
    var showVotingResultsOnClick = function(id) {
        var blockRootElement = $('#' + id);

        var votingBarElements = blockRootElement.find('.post-voting-bar');
        var percents = [];
        for (var i = votingBarElements.length - 1; i >= 0; i--) {
            percents.push(votingBarElements[i].style.width);
            votingBarElements[i].style.width = "0";
        };

        blockRootElement.one('click', function() {
            var votingOptionElements = blockRootElement.find('.post-voting-option');
            var votingCaptionTeaserElements = blockRootElement.find('.post-voting-caption-teaser');

            for (var i = votingOptionElements.length - 1; i >= 0; i--) {
                $(votingOptionElements[i]).removeClass('post-voting-option-closed');
                $(votingCaptionTeaserElements[i]).hide();
                votingBarElements[i].style.width = percents[i];
            };
        });
    }
    </script>
</head>

<body>
    {{{ body }}}
<script src="/js/client.js" type="text/javascript"></script>
<script src="/static/main.js" type="text/javascript"></script>
<script src="/js/likely.js" type="text/javascript"></script>
</body>
</html>
